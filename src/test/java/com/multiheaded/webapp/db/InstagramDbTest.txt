package com.multiheaded.webapp.db;

import com.multiheaded.webapp.model.instagram.domain.InstagramUser;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

@RunWith(SpringRunner.class)
@SpringBootTest
public class InstagramDbTest {

    @Autowired
    private InstagramUserRepository instagramUserRepository;

    private String username = "valeriy2";

    @Before
    public void init() {

        InstagramUser user = new InstagramUser();
        user.setUsername(username);

        instagramUserRepository.save(user);
    }

    /**
     * Test should find the author's book from the PostgreSQL database.
     */
    @Test
    public void testShouldFindUser() {

        InstagramUser user = instagramUserRepository.findByUsername(username);

        Assert.assertNotNull(user);

        System.out.println("The user " + user.getUsername() + " was found");

    }

}
